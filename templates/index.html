<!doctype html>
<html lang="en" class="h-full">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ app_name }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#e0f2fe',
                            400: '#22d3ee',
                            500: '#0ea5e9',
                            700: '#0f3d5e'
                        }
                    }
                }
            }
        };
    </script>
    <style>
        @keyframes riseIn {
            from {
                opacity: 0;
                transform: translateY(14px) scale(0.985);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .result-card {
            opacity: 0;
            animation: riseIn 420ms cubic-bezier(0.18, 0.88, 0.32, 1) forwards;
        }

        .glass {
            backdrop-filter: blur(12px);
            background: linear-gradient(150deg, rgba(15, 23, 42, 0.78), rgba(15, 23, 42, 0.6));
        }

        .hud-chip {
            border: 1px solid rgba(148, 163, 184, 0.35);
            background: rgba(15, 23, 42, 0.52);
            backdrop-filter: blur(6px);
        }
    </style>
</head>
<body class="h-full overflow-x-hidden bg-slate-950 text-slate-100">
    <canvas id="action-canvas" class="pointer-events-none fixed inset-0 -z-20 h-full w-full"></canvas>
    <div class="pointer-events-none fixed inset-0 -z-10">
        <div class="absolute inset-0 bg-[radial-gradient(circle_at_12%_18%,rgba(34,211,238,0.14),transparent_42%),radial-gradient(circle_at_88%_8%,rgba(251,146,60,0.12),transparent_38%),radial-gradient(circle_at_50%_110%,rgba(16,185,129,0.1),transparent_42%),linear-gradient(160deg,rgba(2,6,23,0.82)_0%,rgba(11,18,34,0.72)_52%,rgba(17,24,39,0.82)_100%)]"></div>
    </div>

    <div class="min-h-full">
        <header class="border-b border-white/10 bg-slate-950/60">
            <div class="mx-auto flex max-w-7xl flex-wrap items-center justify-between gap-3 px-4 py-4 sm:px-6 lg:px-8">
                <div>
                    <h1 class="text-2xl font-black tracking-tight text-cyan-200">{{ app_name }}</h1>
                    <p class="text-sm text-slate-300">Embeddings + cosine similarity + ontology filters + zero-trust APIs</p>
                </div>
                <div class="flex items-center gap-2">
                    <span id="scene-status" class="hud-chip rounded-full px-3 py-2 text-xs font-bold tracking-[0.15em] text-cyan-100">SCENE: IDLE</span>
                    <button id="theme-toggle" class="rounded-xl border border-white/20 bg-white/5 px-3 py-2 text-sm font-medium hover:bg-white/10">Toggle Theme</button>
                    <button id="refresh-filters" class="rounded-xl border border-white/20 bg-white/5 px-3 py-2 text-sm font-medium hover:bg-white/10">Refresh Filters</button>
                </div>
            </div>
        </header>

        <main class="mx-auto grid max-w-7xl gap-4 px-4 py-5 sm:px-6 lg:grid-cols-[320px_1fr] lg:px-8">
            <aside class="glass rounded-2xl border border-white/15 p-4 shadow-xl shadow-cyan-950/20">
                <h2 class="mb-3 text-xs font-semibold uppercase tracking-[0.2em] text-cyan-200">Search Controls</h2>

                <form id="search-form" class="space-y-3">
                    <div>
                        <label for="query" class="mb-1 block text-sm font-semibold text-slate-200">Query</label>
                        <input id="query" type="text" placeholder="satellite interference anomaly" class="w-full rounded-xl border border-white/20 bg-slate-950/60 px-3 py-2 text-sm text-slate-100 outline-none ring-cyan-400/50 transition focus:ring-2">
                        <p class="mt-1 text-xs text-slate-400">Live search uses 320ms debounce + request cancelation</p>
                    </div>

                    <div>
                        <label id="category-label" for="category" class="mb-1 block text-sm font-medium text-slate-200">Category</label>
                        <select id="category" class="w-full rounded-xl border border-white/20 bg-slate-950/60 px-3 py-2 text-sm"></select>
                    </div>

                    <div>
                        <label id="source-label" for="source" class="mb-1 block text-sm font-medium text-slate-200">Source</label>
                        <select id="source" class="w-full rounded-xl border border-white/20 bg-slate-950/60 px-3 py-2 text-sm"></select>
                    </div>

                    <div>
                        <label id="security-label" for="security-tier" class="mb-1 block text-sm font-medium text-slate-200">Security Tier</label>
                        <select id="security-tier" class="w-full rounded-xl border border-white/20 bg-slate-950/60 px-3 py-2 text-sm"></select>
                    </div>

                    <div>
                        <label id="ontology-label" for="ontology-type" class="mb-1 block text-sm font-medium text-slate-200">Ontology Type</label>
                        <select id="ontology-type" class="w-full rounded-xl border border-white/20 bg-slate-950/60 px-3 py-2 text-sm"></select>
                    </div>

                    <div>
                        <label for="page-size" class="mb-1 block text-sm font-medium text-slate-200">Page Size</label>
                        <select id="page-size" class="w-full rounded-xl border border-white/20 bg-slate-950/60 px-3 py-2 text-sm">
                            <option value="5">5</option>
                            <option value="10" selected>10</option>
                            <option value="20">20</option>
                            <option value="50">50</option>
                        </select>
                    </div>

                    <div>
                        <label for="api-key" class="mb-1 block text-sm font-medium text-slate-200">API Key / Bearer Token</label>
                        <input id="api-key" type="password" autocomplete="off" placeholder="Required in zero-trust mode" class="w-full rounded-xl border border-white/20 bg-slate-950/60 px-3 py-2 text-sm text-slate-100 outline-none ring-cyan-400/50 transition focus:ring-2">
                        {% if auth_hint %}
                        <p class="mt-1 text-xs text-cyan-200/90">{{ auth_hint }}</p>
                        {% endif %}
                    </div>

                    <div class="grid grid-cols-2 gap-2">
                        <button type="submit" class="rounded-xl bg-cyan-500 px-3 py-2 text-sm font-bold text-slate-950 transition hover:bg-cyan-400">Search</button>
                        <button id="reset-btn" type="button" class="rounded-xl border border-white/20 bg-white/5 px-3 py-2 text-sm font-medium transition hover:bg-white/10">Reset</button>
                    </div>
                </form>
            </aside>

            <section class="space-y-4">
                <div class="grid grid-cols-2 gap-2 md:grid-cols-3 xl:grid-cols-6">
                    <div class="glass rounded-xl border border-white/10 p-3">
                        <p class="text-[11px] uppercase tracking-[0.16em] text-slate-400">Total Matches</p>
                        <p id="stat-total" class="mt-1 text-xl font-black text-cyan-200">0</p>
                    </div>
                    <div class="glass rounded-xl border border-white/10 p-3">
                        <p class="text-[11px] uppercase tracking-[0.16em] text-slate-400">Latency</p>
                        <p id="stat-latency" class="mt-1 text-xl font-black text-cyan-200">-- ms</p>
                    </div>
                    <div class="glass rounded-xl border border-white/10 p-3">
                        <p class="text-[11px] uppercase tracking-[0.16em] text-slate-400">Cache</p>
                        <p id="stat-cache" class="mt-1 text-xl font-black text-cyan-200">--</p>
                    </div>
                    <div class="glass rounded-xl border border-white/10 p-3">
                        <p class="text-[11px] uppercase tracking-[0.16em] text-slate-400">Retries</p>
                        <p id="stat-retry" class="mt-1 text-xl font-black text-cyan-200">0</p>
                    </div>
                    <div class="glass rounded-xl border border-white/10 p-3">
                        <p class="text-[11px] uppercase tracking-[0.16em] text-slate-400">Action Energy</p>
                        <p id="stat-energy" class="mt-1 text-xl font-black text-cyan-200">35%</p>
                    </div>
                    <div class="glass rounded-xl border border-white/10 p-3 col-span-2 md:col-span-1 xl:col-span-1">
                        <p class="text-[11px] uppercase tracking-[0.16em] text-slate-400">Index Version</p>
                        <p id="stat-index" class="mt-1 truncate text-sm font-bold text-cyan-100">--</p>
                    </div>
                </div>

                <div id="error-banner" class="hidden rounded-xl border border-red-400/40 bg-red-500/10 px-4 py-3 text-sm text-red-200"></div>

                <div class="glass rounded-2xl border border-white/10 p-4 shadow-xl shadow-cyan-950/20">
                    <div class="mb-3 flex flex-wrap items-center justify-between gap-2">
                        <p id="result-meta" class="text-sm text-slate-300">Ready.</p>
                        <p id="cache-meta" class="text-xs uppercase tracking-wide text-slate-400"></p>
                    </div>

                    <div id="loading" class="hidden space-y-3"></div>
                    <div id="results" class="space-y-3 transition-opacity duration-200"></div>
                </div>

                <div class="glass flex items-center justify-between rounded-2xl border border-white/10 p-4">
                    <button id="prev-page" class="rounded-xl border border-white/20 bg-white/5 px-3 py-2 text-sm disabled:opacity-40">Previous</button>
                    <p id="page-indicator" class="text-sm text-slate-300">Page 1</p>
                    <button id="next-page" class="rounded-xl border border-white/20 bg-white/5 px-3 py-2 text-sm disabled:opacity-40">Next</button>
                </div>
            </section>
        </main>
    </div>

    <script>
        window.APP_CONFIG = {
            zeroTrustEnabled: {{ 'true' if zero_trust_enabled else 'false' }},
            defaultPageSize: {{ default_page_size }},
            queryDebounceMs: 320,
            bootstrapApiKey: {{ bootstrap_api_key|tojson }},
            authHint: {{ auth_hint|tojson }}
        };
    </script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
